178760cc46415c519b511a73a079e027
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.createAnimatedBlock = createAnimatedBlock;
exports.adapt = adapt;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _AnimatedNode2 = _interopRequireDefault(require("./AnimatedNode"));

var _val = require("../val");

var _InternalAnimatedValue = _interopRequireDefault(require("./InternalAnimatedValue"));

var AnimatedBlock = function (_AnimatedNode) {
  (0, _inherits2.default)(AnimatedBlock, _AnimatedNode);

  function AnimatedBlock(array) {
    var _this;

    (0, _classCallCheck2.default)(this, AnimatedBlock);
    _this = (0, _possibleConstructorReturn2.default)(this, (0, _getPrototypeOf2.default)(AnimatedBlock).call(this, {
      type: 'block',
      block: array.map(function (n) {
        return n.__nodeID;
      })
    }, array));
    _this._array = array;
    return _this;
  }

  (0, _createClass2.default)(AnimatedBlock, [{
    key: "__onEvaluate",
    value: function __onEvaluate() {
      var result;

      this._array.forEach(function (node) {
        result = (0, _val.val)(node);
      });

      return result;
    }
  }]);
  return AnimatedBlock;
}(_AnimatedNode2.default);

function createAnimatedBlock(items) {
  return adapt(items);
}

function nodify(v) {
  if (typeof v === 'object' && v.__isProxy) {
    if (!v.__val) {
      v.__val = new _InternalAnimatedValue.default(0);
    }

    return v.__val;
  }

  return v instanceof _AnimatedNode2.default ? v : _InternalAnimatedValue.default.valueForConstant(v);
}

function adapt(v) {
  return Array.isArray(v) ? new AnimatedBlock(v.map(function (node) {
    return adapt(node);
  })) : nodify(v);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkFuaW1hdGVkQmxvY2suanMiXSwibmFtZXMiOlsiQW5pbWF0ZWRCbG9jayIsImFycmF5IiwidHlwZSIsImJsb2NrIiwibWFwIiwibiIsIl9fbm9kZUlEIiwiX2FycmF5IiwicmVzdWx0IiwiZm9yRWFjaCIsIm5vZGUiLCJBbmltYXRlZE5vZGUiLCJjcmVhdGVBbmltYXRlZEJsb2NrIiwiaXRlbXMiLCJhZGFwdCIsIm5vZGlmeSIsInYiLCJfX2lzUHJveHkiLCJfX3ZhbCIsIkludGVybmFsQW5pbWF0ZWRWYWx1ZSIsInZhbHVlRm9yQ29uc3RhbnQiLCJBcnJheSIsImlzQXJyYXkiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBOztBQUNBOztBQUNBOztJQUVNQSxhOzs7QUFHSix5QkFBWUMsS0FBWixFQUFtQjtBQUFBOztBQUFBO0FBQ2pCLG1IQUFNO0FBQUVDLE1BQUFBLElBQUksRUFBRSxPQUFSO0FBQWlCQyxNQUFBQSxLQUFLLEVBQUVGLEtBQUssQ0FBQ0csR0FBTixDQUFVLFVBQUFDLENBQUM7QUFBQSxlQUFJQSxDQUFDLENBQUNDLFFBQU47QUFBQSxPQUFYO0FBQXhCLEtBQU4sRUFBNERMLEtBQTVEO0FBQ0EsVUFBS00sTUFBTCxHQUFjTixLQUFkO0FBRmlCO0FBR2xCOzs7O21DQUVjO0FBQ2IsVUFBSU8sTUFBSjs7QUFDQSxXQUFLRCxNQUFMLENBQVlFLE9BQVosQ0FBb0IsVUFBQUMsSUFBSSxFQUFJO0FBQzFCRixRQUFBQSxNQUFNLEdBQUcsY0FBSUUsSUFBSixDQUFUO0FBQ0QsT0FGRDs7QUFHQSxhQUFPRixNQUFQO0FBQ0Q7OztFQWR5Qkcsc0I7O0FBaUJyQixTQUFTQyxtQkFBVCxDQUE2QkMsS0FBN0IsRUFBb0M7QUFDekMsU0FBT0MsS0FBSyxDQUFDRCxLQUFELENBQVo7QUFDRDs7QUFFRCxTQUFTRSxNQUFULENBQWdCQyxDQUFoQixFQUFtQjtBQUNqQixNQUFJLE9BQU9BLENBQVAsS0FBYSxRQUFiLElBQXlCQSxDQUFDLENBQUNDLFNBQS9CLEVBQTBDO0FBQ3hDLFFBQUksQ0FBQ0QsQ0FBQyxDQUFDRSxLQUFQLEVBQWM7QUFDWkYsTUFBQUEsQ0FBQyxDQUFDRSxLQUFGLEdBQVUsSUFBSUMsOEJBQUosQ0FBMEIsQ0FBMUIsQ0FBVjtBQUNEOztBQUNELFdBQU9ILENBQUMsQ0FBQ0UsS0FBVDtBQUNEOztBQUVELFNBQU9GLENBQUMsWUFBWUwsc0JBQWIsR0FDSEssQ0FERyxHQUVIRywrQkFBc0JDLGdCQUF0QixDQUF1Q0osQ0FBdkMsQ0FGSjtBQUdEOztBQUVNLFNBQVNGLEtBQVQsQ0FBZUUsQ0FBZixFQUFrQjtBQUN2QixTQUFPSyxLQUFLLENBQUNDLE9BQU4sQ0FBY04sQ0FBZCxJQUNILElBQUloQixhQUFKLENBQWtCZ0IsQ0FBQyxDQUFDWixHQUFGLENBQU0sVUFBQU0sSUFBSTtBQUFBLFdBQUlJLEtBQUssQ0FBQ0osSUFBRCxDQUFUO0FBQUEsR0FBVixDQUFsQixDQURHLEdBRUhLLE1BQU0sQ0FBQ0MsQ0FBRCxDQUZWO0FBR0QiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQW5pbWF0ZWROb2RlIGZyb20gJy4vQW5pbWF0ZWROb2RlJztcbmltcG9ydCB7IHZhbCB9IGZyb20gJy4uL3ZhbCc7XG5pbXBvcnQgSW50ZXJuYWxBbmltYXRlZFZhbHVlIGZyb20gJy4vSW50ZXJuYWxBbmltYXRlZFZhbHVlJztcblxuY2xhc3MgQW5pbWF0ZWRCbG9jayBleHRlbmRzIEFuaW1hdGVkTm9kZSB7XG4gIF9hcnJheTtcblxuICBjb25zdHJ1Y3RvcihhcnJheSkge1xuICAgIHN1cGVyKHsgdHlwZTogJ2Jsb2NrJywgYmxvY2s6IGFycmF5Lm1hcChuID0+IG4uX19ub2RlSUQpIH0sIGFycmF5KTtcbiAgICB0aGlzLl9hcnJheSA9IGFycmF5O1xuICB9XG5cbiAgX19vbkV2YWx1YXRlKCkge1xuICAgIGxldCByZXN1bHQ7XG4gICAgdGhpcy5fYXJyYXkuZm9yRWFjaChub2RlID0+IHtcbiAgICAgIHJlc3VsdCA9IHZhbChub2RlKTtcbiAgICB9KTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVBbmltYXRlZEJsb2NrKGl0ZW1zKSB7XG4gIHJldHVybiBhZGFwdChpdGVtcyk7XG59XG5cbmZ1bmN0aW9uIG5vZGlmeSh2KSB7XG4gIGlmICh0eXBlb2YgdiA9PT0gJ29iamVjdCcgJiYgdi5fX2lzUHJveHkpIHtcbiAgICBpZiAoIXYuX192YWwpIHtcbiAgICAgIHYuX192YWwgPSBuZXcgSW50ZXJuYWxBbmltYXRlZFZhbHVlKDApO1xuICAgIH1cbiAgICByZXR1cm4gdi5fX3ZhbDtcbiAgfVxuICAvLyBUT0RPOiBjYWNoZSBzb21lIHR5cGljYWwgc3RhdGljIHZhbHVlcyAoZS5nLiAwLCAxLCAtMSlcbiAgcmV0dXJuIHYgaW5zdGFuY2VvZiBBbmltYXRlZE5vZGVcbiAgICA/IHZcbiAgICA6IEludGVybmFsQW5pbWF0ZWRWYWx1ZS52YWx1ZUZvckNvbnN0YW50KHYpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYWRhcHQodikge1xuICByZXR1cm4gQXJyYXkuaXNBcnJheSh2KVxuICAgID8gbmV3IEFuaW1hdGVkQmxvY2sodi5tYXAobm9kZSA9PiBhZGFwdChub2RlKSkpXG4gICAgOiBub2RpZnkodik7XG59XG4iXX0=