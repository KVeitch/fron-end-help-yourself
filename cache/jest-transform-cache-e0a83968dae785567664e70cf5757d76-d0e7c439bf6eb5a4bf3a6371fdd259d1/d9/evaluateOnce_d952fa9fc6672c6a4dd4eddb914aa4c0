df90bd89c07cc3d05e4949f6c47ae3dc
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.evaluateOnce = evaluateOnce;

var _InternalAnimatedValue = _interopRequireDefault(require("../core/InternalAnimatedValue"));

var _AnimatedSet = require("../core/AnimatedSet");

var _AnimatedCall = require("../core/AnimatedCall");

var _AnimatedAlways = require("../core/AnimatedAlways");

var _AnimatedCond = require("../core/AnimatedCond");

function evaluateOnce(node) {
  var input = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];
  var callback = arguments.length > 2 ? arguments[2] : undefined;

  if (!Array.isArray(input)) {
    input = [input];
  }

  var done = new _InternalAnimatedValue.default(0);
  var evalNode = (0, _AnimatedCond.createAnimatedCond)(done, 0, (0, _AnimatedCall.createAnimatedCall)([node, (0, _AnimatedSet.createAnimatedSet)(done, 1)], function () {
    callback && callback();

    for (var i = 0; i < input.length; i++) {
      input[i].__removeChild(alwaysNode);

      alwaysNode.__detach();
    }
  }));
  var alwaysNode = (0, _AnimatedAlways.createAnimatedAlways)(evalNode);

  for (var i = 0; i < input.length; i++) {
    input[i].__addChild(alwaysNode);

    alwaysNode.__attach();
  }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImV2YWx1YXRlT25jZS5qcyJdLCJuYW1lcyI6WyJldmFsdWF0ZU9uY2UiLCJub2RlIiwiaW5wdXQiLCJjYWxsYmFjayIsIkFycmF5IiwiaXNBcnJheSIsImRvbmUiLCJBbmltYXRlZFZhbHVlIiwiZXZhbE5vZGUiLCJpIiwibGVuZ3RoIiwiX19yZW1vdmVDaGlsZCIsImFsd2F5c05vZGUiLCJfX2RldGFjaCIsIl9fYWRkQ2hpbGQiLCJfX2F0dGFjaCJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQVNPLFNBQVNBLFlBQVQsQ0FBc0JDLElBQXRCLEVBQWtEO0FBQUEsTUFBdEJDLEtBQXNCLHVFQUFkLEVBQWM7QUFBQSxNQUFWQyxRQUFVOztBQUN2RCxNQUFJLENBQUNDLEtBQUssQ0FBQ0MsT0FBTixDQUFjSCxLQUFkLENBQUwsRUFBMkI7QUFDekJBLElBQUFBLEtBQUssR0FBRyxDQUFDQSxLQUFELENBQVI7QUFDRDs7QUFDRCxNQUFNSSxJQUFJLEdBQUcsSUFBSUMsOEJBQUosQ0FBa0IsQ0FBbEIsQ0FBYjtBQUNBLE1BQU1DLFFBQVEsR0FBRyxzQ0FDZkYsSUFEZSxFQUVmLENBRmUsRUFHZixzQ0FBSyxDQUFDTCxJQUFELEVBQU8sb0NBQUlLLElBQUosRUFBVSxDQUFWLENBQVAsQ0FBTCxFQUEyQixZQUFNO0FBQy9CSCxJQUFBQSxRQUFRLElBQUlBLFFBQVEsRUFBcEI7O0FBQ0EsU0FBSyxJQUFJTSxDQUFDLEdBQUcsQ0FBYixFQUFnQkEsQ0FBQyxHQUFHUCxLQUFLLENBQUNRLE1BQTFCLEVBQWtDRCxDQUFDLEVBQW5DLEVBQXVDO0FBQ3JDUCxNQUFBQSxLQUFLLENBQUNPLENBQUQsQ0FBTCxDQUFTRSxhQUFULENBQXVCQyxVQUF2Qjs7QUFDQUEsTUFBQUEsVUFBVSxDQUFDQyxRQUFYO0FBQ0Q7QUFDRixHQU5ELENBSGUsQ0FBakI7QUFXQSxNQUFNRCxVQUFVLEdBQUcsMENBQU9KLFFBQVAsQ0FBbkI7O0FBQ0EsT0FBSyxJQUFJQyxDQUFDLEdBQUcsQ0FBYixFQUFnQkEsQ0FBQyxHQUFHUCxLQUFLLENBQUNRLE1BQTFCLEVBQWtDRCxDQUFDLEVBQW5DLEVBQXVDO0FBQ3JDUCxJQUFBQSxLQUFLLENBQUNPLENBQUQsQ0FBTCxDQUFTSyxVQUFULENBQW9CRixVQUFwQjs7QUFDQUEsSUFBQUEsVUFBVSxDQUFDRyxRQUFYO0FBQ0Q7QUFDRiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBBbmltYXRlZFZhbHVlIGZyb20gJy4uL2NvcmUvSW50ZXJuYWxBbmltYXRlZFZhbHVlJztcbmltcG9ydCB7IGNyZWF0ZUFuaW1hdGVkU2V0IGFzIHNldCB9IGZyb20gJy4uL2NvcmUvQW5pbWF0ZWRTZXQnO1xuaW1wb3J0IHsgY3JlYXRlQW5pbWF0ZWRDYWxsIGFzIGNhbGwgfSBmcm9tICcuLi9jb3JlL0FuaW1hdGVkQ2FsbCc7XG5pbXBvcnQgeyBjcmVhdGVBbmltYXRlZEFsd2F5cyBhcyBhbHdheXMgfSBmcm9tICcuLi9jb3JlL0FuaW1hdGVkQWx3YXlzJztcbmltcG9ydCB7IGNyZWF0ZUFuaW1hdGVkQ29uZCBhcyBjb25kIH0gZnJvbSAnLi4vY29yZS9BbmltYXRlZENvbmQnO1xuXG4vKipcbiAqIGV2YWx1YXRlIGdpdmVuIG5vZGUgYW5kIG5vdGlmeSBjaGlsZHJlblxuICogQHBhcmFtIG5vZGUgLSBub2RlIHRvIGJlIGV2YWx1YXRlZFxuICogQHBhcmFtIGlucHV0IC0gbm9kZXMgKG9yIG9uZSBub2RlKSByZXByZXNlbnRpbmcgdmFsdWVzIHdoaWNoIHN0YXRlcyBpbnB1dCBmb3Igbm9kZS5cbiAqIEBwYXJhbSBjYWxsYmFjayAtIGFmdGVyIGNhbGxiYWNrXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGV2YWx1YXRlT25jZShub2RlLCBpbnB1dCA9IFtdLCBjYWxsYmFjaykge1xuICBpZiAoIUFycmF5LmlzQXJyYXkoaW5wdXQpKSB7XG4gICAgaW5wdXQgPSBbaW5wdXRdO1xuICB9XG4gIGNvbnN0IGRvbmUgPSBuZXcgQW5pbWF0ZWRWYWx1ZSgwKTtcbiAgY29uc3QgZXZhbE5vZGUgPSBjb25kKFxuICAgIGRvbmUsXG4gICAgMCxcbiAgICBjYWxsKFtub2RlLCBzZXQoZG9uZSwgMSldLCAoKSA9PiB7XG4gICAgICBjYWxsYmFjayAmJiBjYWxsYmFjaygpO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbnB1dC5sZW5ndGg7IGkrKykge1xuICAgICAgICBpbnB1dFtpXS5fX3JlbW92ZUNoaWxkKGFsd2F5c05vZGUpO1xuICAgICAgICBhbHdheXNOb2RlLl9fZGV0YWNoKCk7XG4gICAgICB9XG4gICAgfSlcbiAgKTtcbiAgY29uc3QgYWx3YXlzTm9kZSA9IGFsd2F5cyhldmFsTm9kZSk7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgaW5wdXQubGVuZ3RoOyBpKyspIHtcbiAgICBpbnB1dFtpXS5fX2FkZENoaWxkKGFsd2F5c05vZGUpO1xuICAgIGFsd2F5c05vZGUuX19hdHRhY2goKTtcbiAgfVxufVxuIl19